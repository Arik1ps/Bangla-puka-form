<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶™‡ßã‡¶ï‡¶æ‡¶∞ Admin Panel</title>
<style>
body{
  font-family:sans-serif;
  background:#f0f2f5;
  padding:10px;
}
.container{
  background:#fff;
  padding:15px;
  border-radius:10px;
}
h2{text-align:center;}
select, input{
  width:100%;
  padding:8px;
  margin-bottom:10px;
  border-radius:6px;
  border:1px solid #ccc;
}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th, td{
  border:1px solid #ccc;
  padding:6px;
  text-align:left;
}
th{
  background:#000;
  color:#fff;
}
tr:nth-child(even){background:#f9f9f9;}
button{
  padding:4px 8px;
  border:none;
  border-radius:4px;
  cursor:pointer;
}
button.edit{background:#4CAF50;color:white;}
button.delete{background:#f44336;color:white;}
button:hover{opacity:0.8;}
</style>
</head>
<body>

<div class="container">
<h2>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶™‡ßã‡¶ï‡¶æ‡¶∞ Admin Panel</h2>

<label>‡¶°‡¶æ‡¶ü‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
<select id="categorySelect">
  <option value="‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø">‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø</option>
  <option value="‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü">‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü</option>
  <option value="‡¶∏‡ßç‡¶¨‡ßá‡¶ö‡ßç‡¶õ‡¶æ‡¶∏‡ßá‡¶¨‡¶ï">‡¶∏‡ßç‡¶¨‡ßá‡¶ö‡ßç‡¶õ‡¶æ‡¶∏‡ßá‡¶¨‡¶ï</option>
</select>

<label>Search (‡¶®‡¶æ‡¶Æ ‡¶¨‡¶æ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤):</label>
<input type="text" id="searchInput" placeholder="Search...">

<table id="dataTable">
  <thead>
    <tr>
      <th>‡¶®‡¶æ‡¶Æ</th>
      <th>‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤</th>
      <th>‡¶Ü‡¶ó‡ßç‡¶∞‡¶π</th>
      <th>‡¶ú‡¶Æ‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody id="dataBody"></tbody>
</table>

</div>

<script>
// üî¥ Firebase URL
const FIREBASE_URL = "https://YOUR_PROJECT_NAME-default-rtdb.firebaseio.com";

let currentData = {}; // Store all data
const categorySelect = document.getElementById("categorySelect");
const dataBody = document.getElementById("dataBody");
const searchInput = document.getElementById("searchInput");

// Fetch data from Firebase
function fetchData(){
  const category = categorySelect.value;
  fetch(FIREBASE_URL + "https://bangla-puka-data-127ad-default-rtdb.firebaseio.com/" + category + ".json")
    .then(res=>res.json())
    .then(data=>{
      currentData = data || {};
      renderTable();
    });
}

// Render table
function renderTable(){
  const searchTerm = searchInput.value.toLowerCase();
  dataBody.innerHTML = "";
  Object.entries(currentData).forEach(([key,item])=>{
    if(searchTerm && 
       !((item.‡¶®‡¶æ‡¶Æ||"").toLowerCase().includes(searchTerm) || 
         (item.‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤||"").toLowerCase().includes(searchTerm))){
      return;
    }
    const row = document.createElement("tr");
    row.innerHTML = `
      <td contenteditable="true" data-field="‡¶®‡¶æ‡¶Æ">${item.‡¶®‡¶æ‡¶Æ||""}</td>
      <td contenteditable="true" data-field="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤">${item.‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤||""}</td>
      <td contenteditable="true" data-field="‡¶Ü‡¶ó‡ßç‡¶∞‡¶π">${item.‡¶Ü‡¶ó‡ßç‡¶∞‡¶π||""}</td>
      <td>${item.‡¶ú‡¶Æ‡¶æ‡¶∞_‡¶∏‡¶Æ‡ßü||""}</td>
      <td>
        <button class="edit" onclick="editData('${key}', this)">Update</button>
        <button class="delete" onclick="deleteData('${key}')">Delete</button>
      </td>
    `;
    dataBody.appendChild(row);
  });
}

// Edit/Update
function editData(key, btn){
  const row = btn.parentElement.parentElement;
  const updatedData = {
    ...currentData[key],
    ‡¶®‡¶æ‡¶Æ: row.children[0].innerText,
    ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤: row.children[1].innerText,
    ‡¶Ü‡¶ó‡ßç‡¶∞‡¶π: row.children[2].innerText
  };
  const category = categorySelect.value;
  fetch(FIREBASE_URL + "/" + category + "/" + key + ".json",{
    method:"PUT",
    body: JSON.stringify(updatedData)
  }).then(()=>fetchData());
}

// Delete
function deleteData(key){
  if(confirm("‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶∏‡¶§‡ßç‡¶Ø‡¶ø‡¶á ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")){
    const category = categorySelect.value;
    fetch(FIREBASE_URL + "/" + category + "/" + key + ".json",{
      method:"DELETE"
    }).then(()=>fetchData());
  }
}

// Event listeners
categorySelect.addEventListener("change", fetchData);
searchInput.addEventListener("input", renderTable);

// Initial load
fetchData();
</script>

</body>
</html>
